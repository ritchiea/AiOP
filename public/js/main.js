// Generated by CoffeeScript 1.8.0
(function() {
  this.app = angular.module('oracle', []);

  this.app.controller('ctrl', [
    '$scope', '$timeout', '$http', function($scope, $timeout, $http) {
      var getPosts, pollPosts;
      $scope.distance = '.1';
      getPosts = function() {
        $scope.showLoader = true;
        return $http.get('./fetch', {
          params: {
            distance: $scope.distance
          }
        }).success(function(data) {
          $scope.posts = data;
          return $scope.showLoader = false;
        });
      };
      pollPosts = function() {
        getPosts();
        return $timeout(pollPosts, 30000);
      };
      pollPosts();
      return $scope.refresh = function() {
        return getPosts();
      };
    }
  ]);

}).call(this);
